<% if (messages && messages.length > 0) { %>
    <ul>
        <% messages.forEach(message => { %>
            <li>
                <strong><%= message.title %></strong><br />
                <p><%= message.body %></p>

                <p>
                    <em>From: 
                        <% if (currentUser && currentUser.is_member) { %>
                            <%= message.sender_name %>
                        <% } else { %>
                            ********
                        <% } %>
                    </em>
                </p>

                <small>
                    Sent on: 
                    <% if (currentUser && currentUser.is_member) { %>
                        <%= message.timestamp.toLocaleString() %>
                    <% } else { %>
                        ********
                    <% } %>
                </small>

                <% if (currentUser && (currentUser.id === message.user_id || currentUser.is_admin)) { %>
                    <form action="/delete/<%= message.id %>" method="POST" style="display:inline;">
                        <button type="submit">Delete</button>
                    </form>

                    <form action="/edit/<%= message.id %>" method="GET" style="display:inline;">
                        <button type="submit">Edit</button>
                    </form>
                <% } %>
            </li>
        <% }) %>
    </ul>
<% } else { %>
    <p>No messages found.</p>
<% } %>
